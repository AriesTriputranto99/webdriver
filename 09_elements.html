<section>
  <h2>Elements</h2>
  <p>One of the key abstractions of the WebDriver API is the 
  <code>WebElement</code> interface. Each instance of this interface represents an 
  <a href="http://www.w3.org/TR/2012/WD-dom-20120105/#interface-element">Element</a>as defined in the
  [[!DOM4]] specification. Because the WebDriver API is designed to allow users to interact with apps as if
  they were actual users, the capabilities offered by the 
  <code>WebElement</code> interface are somewhat different from those offered by the DOM Element interface.</p>

  <p>Each WebElement instance must have an ID, which is distinct from the value
  of the DOM Element's "id" property. The ID for every WebElement representing the same
  underlying DOM Element must be the same. The IDs used to refer to different
  underlying DOM Elements must be unique.</p>

  <div class="note">
    <p>This requirement around WebElement IDs allows for efficient equality
    checks when the WebDriver API is being used out of process.</p>
  </div>

  <p>This section of the specification covers finding elements. Later sections deal with querying and interacting with
  these located elements. The primary interface used by the WebDriver API for locating elements is the 
  <code>SearchContext</code>.</p>
  <section>
    <h2>Lists of WebElements</h2>
    
    <p>The primary grouping of <code>WebElement</code> instances is an <code>array</code> of <code>WebElement</code> instances</p>
    
    <p>A reference to an WebElement is obtained via a SearchContext. The key
    interfaces are:</p>
  </section>
  <section>
    <dl class="idl" title="interface Locator">
      <dt>readonly attribute DOMString strategy</dt>
      <dd>The name of the strategy that should be used to locate elements.</dd>
      <dt>readonly attribute DOMString value</dt>
      <dd>The value to pass to the element finding strategy</dd>
    </dl>
  </section>
  <section>
    <dl class="idl" title="interface SeachContext">
      <dt>caller getter WebElement[] findElements(in Locator locator)</dt>
      <dd></dd>
      <dt>called getter WebElement findElement(in Locator locator)</dt>
      <dd></dd>
    </dl>
  </section>

  <section>
    <h2>Element Location Strategies</h2>
    <section>
      <h2>ARIA</h2>
      <p>This section is non-normative: It SHOULD be possible to find elements using their ARIA roles. It MAY be possible to find elements using their ARIA states and properties. All references to "ARIA" refer to [[!WAI-ARIA]]</p>
    </section>
    <section>
      <h2>CSS Selectors</h2>
        <tr>
          <th>Capability Name</th>
          <th>Type</th>
        </tr>
        <tr>
          <td>cssSelectors</td>
          <td>boolean</td>
        </tr>
      </table>
      <p>If a browser supports the 
      <a href="http://dev.w3.org/2006/webapi/selectors-api/">CSS Selectors API</a> ([[!SELECTORS-API]]) it MUST support locating elements by
      CSS Selector. If the browser does not support the browser CSS Selector spec it MAY chose to implement locating
      by this mechanism. Elements MUST be returned in the same order as if "<code>querySelectorAll</code>" had been called. Compound selectors are allowed.</p>
    </section>
    <section>
      <h2>ECMAScript</h2>
      <p>Finding elements by ecmascript is covered in the <a href="#ecmascript">ecmascript part of this spec</a>.</p>
    </section>
    <section>
      <h2>Element ID</h2>
      <p>This strategy MUST be supported by all WebDriver implementations.</p>
      <p>The HTML5 specification ([[!HTML5]]) states that <a href="http://www.w3.org/TR/html5/elements.html#the-id-attribute">element IDs must be unique within their home subtree</a>. Sadly, this uniqueness requirement is not always met. Consequently, this strategy is equally valid for finding a single element, or groups of elements. In the case of finding a single WebElement, this MUST be functionally identical to a call to "<a href="http://www.w3.org/TR/2012/WD-dom-20120105/#dom-document-getelementbyid">document.getElementById()</a>" from the Web DOM Core specification ([[!DOM4]]). When finding multiple elements, this is equivalent to an CSS query of "<tt>#value</tt>" where "value" is the ID being searched for with all "'" characters being properly escaped..</p>
    </section>
    <section>
      <h2>Link Text</h2>
      <p>This strategy MUST be supported by all WebDriver implementations. </p>
      <p>The following algorithm MUST be used:</p>
      <ol>
        <li>WebDriver will need to look up all of the A elements on the page. The lookup SHOULD be done using 
          [[!SELECTORS-API]]
            but MAY use "<a href="http://www.w3.org/TR/2012/WD-dom-20120105/#dom-document-getelementsbytagname">document.getElementsByTagName()</a>" 
            from the Web DOM Core specification ([[!DOM4]]). If the document being searched is a valid XHTML document, then this step MUST return all elements that the browser would consider an anchor tag.</li>
        <li>The value of getElementText MUST match with case sensitive of the search term passed in</li>
      </ol>
    </section>
    <section>
      <h2>Partial Link Text</h2>
      <p>This strategy MUST be supported by all WebDriver implementations.</p>
      <p>The following algorithm MUST be used:</p>
      <ol>
        <li>Look up all of the A elements on the page. The lookup SHOULD be done using 
          <a href="http://dev.w3.org/2006/webapi/selectors-api/">CSS Selectors API</a> ([[!SELECTORS-API]])
            but MAY use "<a href="http://www.w3.org/TR/2012/WD-dom-20120105/#dom-document-getelementsbytagname">document.getElementsByTagName()</a>" from [[!DOM4]]. If the document being searched is a valid XHTML document, then this step MUST return all elements that the browser would consider an anchor tag.</a>.</li>
        <li>The search term MUST match case sensitive a subsection of the value of getElementText</li>
      </ol>
    </section>
    <section>
      <h2>XPath</h2>
      <p>All WebDriver implementations MUST support finding elements by XPath 1.0 [[!XPATH]] with the <a href="http://dev.w3.org/html5/spec/Overview.html#interactions-with-xpath-and-xslt">edits from section 3.3</a> of the [[!HTML5]] specification made. If no native support is present in the browser, a pure JS implementation MAY be used. When called, the returned values MUST be equivalent of calling "<a href="http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathEvaluator-evaluate">evaluate</a>" function from the DOM Level 3 XPath spec [[DOM-LEVEL-3-XPATH]] with the result type set to "<a href="http://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult-ORDERED-NODE-SNAPSHOT-TYPE">ORDERED_NODE_SNAPSHOT_TYPE</a> (7).</p>
    </section>
  </section>
</section>
